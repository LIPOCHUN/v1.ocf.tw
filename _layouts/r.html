---
layout: global
---
{% include _var/r.html %}

<main id="report">

  <header id="hero"
          class="ui inverted {{ report.background_color }}
          center aligned
          very padded marginless
          basic segment">

    {% include r/background.html item=report %}

    <hr class="ui hidden divider" />

    <div class="ui stripe relative container">
      <img class="ui centered tiny image"
           src="{{ site.data.people.orgs.ocf.icon }}"
           alt="OCF logo" />
      <h1 class="ui inverted header">
        {{ report_title }}
        {% for subtitle in report_subtitles %}
        <div class="sub header">{{ subtitle }}</div>
        {% endfor %}
      </h1>
      {% for description in report_descriptions %}
      <p>{{ description }}</p>
      {% endfor %}
    </div>

    <hr class="ui hidden divider" />

  </header>

  {% for row in report_rows %}

  <a name="{{ row.anchor_name }}"></a>
  <section {% if row.background_color %}
           class="ui inverted {{ background_color }} marginless basic segment"
           {% else %}
           class="ui marginless basic segment"
           {% endif %}>

    {% if row.background_image %}
    {% include r/background.html item=row %}
    {% endif %}

    <div class="ui {{row.columns_count}} column stackable grid"
         {% if row.columns_reverse %}
         style="flex-direction: row-reverse;"
         {% endif %}>

      {% for column in row.columns %}
      <div class="{{ column.background_color }} {{ column.width }} wide column"
           {% if column.text_align %}
           style="text-align: {{ column.text_align }};"
           {% endif %}>

        {% if column.background_image %}
        {% include r/background.html item=column %}
        {% endif %}

        <div class="ui container">

          {% if column.image %}
          <div class="ui {{ column.image_size}} image">
            <img src="{{ column.image }}"
                 alt="{{ column.image_alt }}" />
          </div>
          <hr class="ui hidden divider" />
          {% endif %}

          {% if column.icon %}
          <p><i class="{{ column.icon_color }} {{column.icon_style}}
             huge {{ column.icon }} icon"></i>
          </p>
          {% endif %}

          {% if column.title %}
          <h2 {% if column.title_icon %}
              class="ui {% if column.background_color %} inverted {% endif %} center aligned icon header"
              {% else %}
              class="ui {% if column.background_color %} inverted {% endif %} header"
              {% endif %}>

            {% if column.title_icon %}
            <i class="icon {{ column.title_icon }} {{ column.title_icon }}"></i>
            {% endif %}

            {{ column.title }}

            {% if column.subtitles %}
            {% for subtitle in column.subtitles %}
            <div class="sub header">
              {{ subtitle }}
            </div>
            {% endfor %}
            {% endif %}
          </h2>
          {% endif %}

          {% if column.descriptions %}
          {% for description in column.descriptions %}
          <p>{{ description }}</p>
          {% endfor %}
          {% endif %}

          {% if column.projects %}
          <div class="ui link divided list">
            {% for project_id in column.projects %}
            {% assign project = site.data.p[project_id].project %}
            {% include _var/plist/item.html project=project %}
            {% include _shared/link.html title=project_name url=project_url class='item' %}
            {% assign project = undefined %}
            {% endfor %}
          </div>
          {% endif %}

          {% if column.events %}
          <div class="ui link divided list">
            {% for item in column.events %}
            {% if item.parent_project_id %}
            {% assign parent_project = site.data.p[item.parent_project_id].project %}
            {% assign project = site.data.p[item.parent_project_id][item.project_id].project %}
            {% else %}
            {% assign project = site.data.p[item.project_id].project %}
            {% endif %}
            {% include _var/events.html %}
            {% assign event = events | where: 'id', item.event_id | first %}
            {% include _var/event.html %}
            {% if event_url %}
            {% assign link_url = event_url %}
            {% else %}
            {% assign link_url = event.links[0].url %}
            {% endif %}

            {% include _shared/link.html title=event_name url=link_url class='item' %}

            {% assign parent_project = undefined %}
            {% assign project = undefined %}
            {% assign events = undefined %}
            {% assign event = undefined %}
            {% assign link_url = undefined %}
            {% endfor %}
          </div>
          {% endif %}

          {% if column.links %}
          <div class="ui link divided list">
            {% for link in column.links %}
            {% include _shared/link.html link=link class='item' %}
            {% endfor %}
          </div>
          {% endif %}

          {% if column.buttons %}
          <div class="ui buttons">
            {% for button in column.buttons %}
            <a {% if button.icon %}
               class="ui icon labeled {{ button.color }} button"
               {% else %}
               class="ui {{ button.color }} button"
               {% endif %}
               href="{{ button.url }}"
               {% if button.url contains 'http' %}
               target="_blank"
               {% endif %}>
              {% if button.icon %}
              <i class="{{ button.icon }} icon"></i>
              {% endif %}
              {{ button.title }}
            </a>
            {% endfor %}
          </div>
          {% endif %}

        </div>

        {% if column.people %}
        <div id="people"
             class="ui {{ column.people_column_count }} column stackable grid">
          {% for person_id in column.people %}
          {% assign person = site.data.people.individuals[person_id] %}
          <div class="column">
            <div class="image container">
            </div>
            <img src="{{ person.avatar }}"
                 alt="Avatar of '{{ person.name }} ({{ person.nick }})'" />
            <span class="ui tiny bottom attached inverted label">
              {{ person.name }}
              ({{ person.nick }})
            </span>
          </div>
          {% assign person = undefined %}
          {% endfor %}
        </div>
        {% endif %}

        {% if column.orgs %}
        <div class="ui horizontal center aligned logos list">
          {% for org_id in column.orgs %}
          {% assign org = site.data.people.orgs[org_id] %}
          <a class="item"
             target="_blank"
             href="{{ org.link[0].url }}">
            <img class="logo"
                 src="{{ org.logo }}"
                 alt="{{ org.name }}" />
          </a>
          {% assign org = undefined %}
          {% endfor %}
        </div>
        {% endif %}

        {% if column.slides %}
        <div class="slick">
          {% for slide in column.slides %}
          <img class="ui image"
               src="{{ slide.image }}"
               alt="{{ slide.alt }}" />
          {% endfor %}
        </div>
        {% endif %}

        {% if column.iframes %}
        {% for iframe in column.iframes %}
        <iframe src="{{ iframe.url }}"
                style="height: {{ iframe.height }};"
                {% if iframe.scrolling %}
                scrolling="auto"
                {% else %}
                scrolling="no"
                {% endif %}></iframe>
        {% endfor %}
        {% endif %}

      </div>
      {% endfor %}

    </div>

  </section>
  {% endfor %}

  <!-- 最後放上無所不在的捐款廣告 -->
  {% if page.lang == "en" %}
  {% else %}
  {% include banner_cta.html %}
  {% endif %}

</main>
